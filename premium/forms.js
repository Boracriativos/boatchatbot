/*! For license information please see forms.js.LICENSE.txt */
(()=>{"use strict";var e={};function t(){return t=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},t.apply(this,arguments)}e.n=t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},e.d=(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},e.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=function(e){var r=e.params,n=r.id,o=r.label,a=r.type,i=r.name,c=r.options,l=r.required,u=r.placeholder,s=r.default,f=r.maxlength,d=r.rows,p=r.className,m=c?JSON.parse(decodeURIComponent(c)):null,h="".concat("mwai-form-field mwai-form-field-"+a).concat(p?" "+p:""),y=s?{"data-default-value":s}:{},v={"data-form-required":!0===l};switch(a){case"select":return React.createElement("fieldset",t({id:n,className:h,"data-form-name":i,"data-form-type":"select"},v,y),React.createElement("legend",null,o),React.createElement("div",{className:"mwai-form-field-container"},React.createElement("select",{name:i,required:"yes"===l},m&&m.map((function(e){return React.createElement("option",{key:e.value,value:e.value},e.label)})))));case"radio":return React.createElement("fieldset",t({id:n,className:h,"data-form-name":i,"data-form-type":"radio"},v,s?{"data-default-value":s}:{}),React.createElement("legend",null,o),m&&m.map((function(e){return React.createElement("div",{className:"mwai-form-field-container",key:e.value},React.createElement("input",{id:"".concat(n,"-").concat(i,"-").concat(e.value),type:"radio",name:i,value:e.value,required:"yes"===l}),React.createElement("label",{htmlFor:"".concat(n,"-").concat(i,"-").concat(e.value)},e.label))})));case"checkbox":return React.createElement("fieldset",t({id:n,className:h,"data-form-name":i,"data-form-type":"checkbox"},v,s?{"data-default-value":s}:{}),React.createElement("legend",null,o),m&&m.map((function(e){return React.createElement("div",{className:"mwai-form-field-container",key:e.value},React.createElement("input",{id:"".concat(n,"-").concat(i,"-").concat(e.value),type:"checkbox",name:i,value:e.value,required:"yes"===l}),React.createElement("label",{htmlFor:"".concat(n,"-").concat(i,"-").concat(e.value)},e.label))})));case"textarea":return React.createElement("fieldset",t({id:n,className:h,"data-form-name":i,"data-form-type":"textarea"},v,y),React.createElement("legend",null,o),React.createElement("div",{className:"mwai-form-field-container"},React.createElement("textarea",{id:n,name:i,placeholder:u,maxLength:f,rows:d,required:"yes"===l})));default:return React.createElement("fieldset",t({id:n,className:h,"data-form-name":i,"data-form-type":"input"},v,y),React.createElement("legend",null,o),React.createElement("div",{className:"mwai-form-field-container"},React.createElement("input",{id:n,type:"text",name:i,placeholder:u,maxLength:f,required:"yes"===l})))}},n=function(e){var t=e.params,r=t.id,n=t.label,o=t.type,a=t.name,i=t.required,c=t.className,l=t.accept,u=void 0===l?"":l,s=t.multiple,f=t.customAccept,d=void 0===f?"":f,p="mwai-form-upload mwai-form-upload-".concat(o),m="".concat(p).concat(c?" ".concat(c):""),h=!0===i,y=function(e,t){switch(e){case"all-images":return"image/*";case"all-documents":return".pdf,.doc,.docx,.txt,.xls,.xlsx";case"all":return"";case"custom":return t||"";default:return e}}(u,d);return React.createElement("fieldset",{className:m,"data-form-name":a,"data-form-type":"input","data-form-required":h},React.createElement("legend",null,n),React.createElement("div",{className:"mwai-form-upload-container"},React.createElement("input",{id:r,type:"file",name:a,required:h,accept:y,multiple:s})))},o=React;function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}var i=function(e){var t=[];return function(r,n){if("object"===a(n)&&null!==n){if(-1!==t.indexOf(n)){if(!e)throw console.warn("Circular reference found.",{key:r,value:n,cache:t,cacheIndex:t.indexOf(n)}),new Error("Circular reference found. Cancelled.");return}t.push(n)}return n}};function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return JSON.stringify(e,i(r),t)}function l(){return l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l.apply(this,arguments)}e.n(o)().Component;const u=["children","options"],s={blockQuote:"0",breakLine:"1",breakThematic:"2",codeBlock:"3",codeFenced:"4",codeInline:"5",footnote:"6",footnoteReference:"7",gfmTask:"8",heading:"9",headingSetext:"10",htmlBlock:"11",htmlComment:"12",htmlSelfClosing:"13",image:"14",link:"15",linkAngleBraceStyleDetector:"16",linkBareUrlDetector:"17",linkMailtoDetector:"18",newlineCoalescer:"19",orderedList:"20",paragraph:"21",ref:"22",refImage:"23",refLink:"24",table:"25",tableSeparator:"26",text:"27",textBolded:"28",textEmphasized:"29",textEscaped:"30",textMarked:"31",textStrikethroughed:"32",unorderedList:"33"};var f,d;(d=f||(f={}))[d.MAX=0]="MAX",d[d.HIGH=1]="HIGH",d[d.MED=2]="MED",d[d.LOW=3]="LOW",d[d.MIN=4]="MIN";const p=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","className","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce(((e,t)=>(e[t.toLowerCase()]=t,e)),{for:"htmlFor"}),m={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},h=["style","script"],y=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,v=/mailto:/i,g=/\n{2,}$/,b=/^(\s*>[\s\S]*?)(?=\n{2,})/,w=/^ *> ?/gm,x=/^ {2,}\n/,k=/^(?:( *[-*_])){3,} *(?:\n *)+\n/,S=/^\s*(`{3,}|~{3,}) *(\S+)?([^\n]*?)?\n([\s\S]+?)\s*\1 *(?:\n *)*\n?/,E=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,O=/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,A=/^(?:\n *)*\n/,j=/\r\n?/g,L=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,R=/^\[\^([^\]]+)]/,T=/\f/g,C=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,N=/^\s*?\[(x|\s)\]/,I=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,M=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,P=/^([^\n]+)\n *(=|-){3,} *(?:\n *)+\n/,q=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,_=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,F=/^<!--[\s\S]*?(?:-->)/,$=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,z=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,D=/^\{.*\}$/,U=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,G=/^<([^ >]+@[^ >]+)>/,B=/^<([^ >]+:\/[^ >]+)>/,J=/-([a-z])?/gi,H=/^(.*\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,W=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,V=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,Z=/^\[([^\]]*)\] ?\[([^\]]*)\]/,X=/(\[|\])/g,Y=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,Q=/\t/g,K=/(^ *\||\| *$)/g,ee=/^ *:-+: *$/,te=/^ *:-+ *$/,re=/^ *-+: *$/,ne="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|~~.*?~~|==.*?==|.|\\n)*?)",oe=new RegExp(`^([*_])\\1${ne}\\1\\1(?!\\1)`),ae=new RegExp(`^([*_])${ne}\\1(?!\\1|\\w)`),ie=new RegExp(`^==${ne}==`),ce=new RegExp(`^~~${ne}~~`),le=/^\\([^0-9A-Za-z\s])/,ue=/^[\s\S]+?(?=[^0-9A-Z\s\u00c0-\uffff&#;.()'"]|\d+\.|\n\n| {2,}\n|\w+:\S|$)/i,se=/^\n+/,fe=/^([ \t]*)/,de=/\\([^\\])/g,pe=/ *\n+$/,me=/(?:^|\n)( *)$/,he="(?:\\d+\\.)",ye="(?:[*+-])";function ve(e){return"( *)("+(1===e?he:ye)+") +"}const ge=ve(1),be=ve(2);function we(e){return new RegExp("^"+(1===e?ge:be))}const xe=we(1),ke=we(2);function Se(e){return new RegExp("^"+(1===e?ge:be)+"[^\\n]*(?:\\n(?!\\1"+(1===e?he:ye)+" )[^\\n]*)*(\\n|$)","gm")}const Ee=Se(1),Oe=Se(2);function Ae(e){const t=1===e?he:ye;return new RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}const je=Ae(1),Le=Ae(2);function Re(e,t){const r=1===t,n=r?je:Le,o=r?Ee:Oe,a=r?xe:ke;return{match(e,t,r){const o=me.exec(r);return o&&(t.list||!t.inline&&!t.simple)?n.exec(e=o[1]+e):null},order:1,parse(e,t,n){const i=r?+e[2]:void 0,c=e[0].replace(g,"\n").match(o);let l=!1;return{items:c.map((function(e,r){const o=a.exec(e)[0].length,i=new RegExp("^ {1,"+o+"}","gm"),u=e.replace(i,"").replace(a,""),s=r===c.length-1,f=-1!==u.indexOf("\n\n")||s&&l;l=f;const d=n.inline,p=n.list;let m;n.list=!0,f?(n.inline=!1,m=u.replace(pe,"\n\n")):(n.inline=!0,m=u.replace(pe,""));const h=t(m,n);return n.inline=d,n.list=p,h})),ordered:r,start:i}},render:(t,r,n)=>e(t.ordered?"ol":"ul",{key:n.key,start:t.type===s.orderedList?t.start:void 0},t.items.map((function(t,o){return e("li",{key:o},r(t,n))})))}}const Te=new RegExp("^\\[((?:\\[[^\\]]*\\]|[^\\[\\]]|\\](?=[^\\[]*\\]))*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),Ce=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/,Ne=[b,S,E,I,P,M,F,H,Ee,je,Oe,Le],Ie=[...Ne,/^[^\n]+(?:  \n|\n{2,})/,q,z];function Me(e){return e.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Pe(e){return re.test(e)?"right":ee.test(e)?"center":te.test(e)?"left":null}function qe(e,t,r,n){const o=r.inTable;r.inTable=!0;let a=e.trim().split(/( *(?:`[^`]*`|<.*?>.*?<\/.*?>(?!<\/.*?>)|\\\||\|) *)/).reduce(((e,o)=>("|"===o.trim()?e.push(n?{type:s.tableSeparator}:{type:s.text,text:o}):""!==o&&e.push.apply(e,t(o,r)),e)),[]);r.inTable=o;let i=[[]];return a.forEach((function(e,t){e.type===s.tableSeparator?0!==t&&t!==a.length-1&&i.push([]):(e.type!==s.text||null!=a[t+1]&&a[t+1].type!==s.tableSeparator||(e.text=e.text.trimEnd()),i[i.length-1].push(e))})),i}function _e(e,t,r){r.inline=!0;const n=e[2]?e[2].replace(K,"").split("|").map(Pe):[],o=e[3]?function(e,t,r){return e.trim().split("\n").map((function(e){return qe(e,t,r,!0)}))}(e[3],t,r):[],a=qe(e[1],t,r,!!o.length);return r.inline=!1,o.length?{align:n,cells:o,header:a,type:s.table}:{children:a,type:s.paragraph}}function Fe(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function $e(e){return function(t,r){return r.inline?e.exec(t):null}}function ze(e){return function(t,r){return r.inline||r.simple?e.exec(t):null}}function De(e){return function(t,r){return r.inline||r.simple?null:e.exec(t)}}function Ue(e){return function(t){return e.exec(t)}}function Ge(e,t,r){if(t.inline||t.simple)return null;if(r&&!r.endsWith("\n"))return null;let n="";e.split("\n").every((e=>!Ne.some((t=>t.test(e)))&&(n+=e+"\n",e.trim())));const o=n.trimEnd();return""==o?null:[n,o]}function Be(e){try{if(decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"").match(/^\s*(javascript|vbscript|data(?!:image)):/i))return null}catch(e){return null}return e}function Je(e){return e.replace(de,"$1")}function He(e,t,r){const n=r.inline||!1,o=r.simple||!1;r.inline=!0,r.simple=!0;const a=e(t,r);return r.inline=n,r.simple=o,a}function We(e,t,r){const n=r.inline||!1,o=r.simple||!1;r.inline=!1,r.simple=!0;const a=e(t,r);return r.inline=n,r.simple=o,a}function Ve(e,t,r){const n=r.inline||!1;r.inline=!1;const o=e(t,r);return r.inline=n,o}const Ze=(e,t,r)=>({children:He(t,e[1],r)});function Xe(){return{}}function Ye(){return null}function Qe(...e){return e.filter(Boolean).join(" ")}function Ke(e,t,r){let n=e;const o=t.split(".");for(;o.length&&(n=n[o[0]],void 0!==n);)o.shift();return n||r}function et(e="",t={}){function r(e,r,...n){const o=Ke(t.overrides,`${e}.props`,{});return t.createElement(function(e,t){const r=Ke(t,e);return r?"function"==typeof r||"object"==typeof r&&"render"in r?r:Ke(t,`${e}.component`,e):e}(e,t.overrides),l({},r,o,{className:Qe(null==r?void 0:r.className,o.className)||void 0}),...n)}function n(e){e=e.replace(C,"");let n=!1;t.forceInline?n=!0:t.forceBlock||(n=!1===Y.test(e));const a=d(f(n?e:`${e.trimEnd().replace(se,"")}\n\n`,{inline:n}));for(;"string"==typeof a[a.length-1]&&!a[a.length-1].trim();)a.pop();if(null===t.wrapper)return a;const i=t.wrapper||(n?"span":"div");let c;if(a.length>1||t.forceWrapper)c=a;else{if(1===a.length)return c=a[0],"string"==typeof c?r("span",{key:"outer"},c):c;c=null}return o.createElement(i,{key:"outer"},c)}function a(e,r){const a=r.match(y);return a?a.reduce((function(r,a,i){const c=a.indexOf("=");if(-1!==c){const l=function(e){return-1!==e.indexOf("-")&&null===e.match($)&&(e=e.replace(J,(function(e,t){return t.toUpperCase()}))),e}(a.slice(0,c)).trim(),u=function(e){const t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(a.slice(c+1).trim()),s=p[l]||l,f=r[s]=function(e,t,r,n){return"style"===t?r.split(/;\s?/).reduce((function(e,t){const r=t.slice(0,t.indexOf(":"));return e[r.trim().replace(/(-[a-z])/g,(e=>e[1].toUpperCase()))]=t.slice(r.length+1).trim(),e}),{}):"href"===t||"src"===t?n(r,e,t):(r.match(D)&&(r=r.slice(1,r.length-1)),"true"===r||"false"!==r&&r)}(e,l,u,t.sanitizer);"string"==typeof f&&(q.test(f)||z.test(f))&&(r[s]=o.cloneElement(n(f.trim()),{key:i}))}else"style"!==a&&(r[p[a]||a]=!0);return r}),{}):null}t.overrides=t.overrides||{},t.sanitizer=t.sanitizer||Be,t.slugify=t.slugify||Me,t.namedCodesToUnicode=t.namedCodesToUnicode?l({},m,t.namedCodesToUnicode):m,t.createElement=t.createElement||o.createElement;const i=[],c={},u={[s.blockQuote]:{match:De(b),order:1,parse:(e,t,r)=>({children:t(e[0].replace(w,""),r)}),render:(e,t,n)=>r("blockquote",{key:n.key},t(e.children,n))},[s.breakLine]:{match:Ue(x),order:1,parse:Xe,render:(e,t,n)=>r("br",{key:n.key})},[s.breakThematic]:{match:De(k),order:1,parse:Xe,render:(e,t,n)=>r("hr",{key:n.key})},[s.codeBlock]:{match:De(E),order:0,parse:e=>({lang:void 0,text:e[0].replace(/^ {4}/gm,"").replace(/\n+$/,"")}),render:(e,t,n)=>r("pre",{key:n.key},r("code",l({},e.attrs,{className:e.lang?`lang-${e.lang}`:""}),e.text))},[s.codeFenced]:{match:De(S),order:0,parse:e=>({attrs:a("code",e[3]||""),lang:e[2]||void 0,text:e[4],type:s.codeBlock})},[s.codeInline]:{match:ze(O),order:3,parse:e=>({text:e[2]}),render:(e,t,n)=>r("code",{key:n.key},e.text)},[s.footnote]:{match:De(L),order:0,parse:e=>(i.push({footnote:e[2],identifier:e[1]}),{}),render:Ye},[s.footnoteReference]:{match:$e(R),order:1,parse:e=>({target:`#${t.slugify(e[1],Me)}`,text:e[1]}),render:(e,n,o)=>r("a",{key:o.key,href:t.sanitizer(e.target,"a","href")},r("sup",{key:o.key},e.text))},[s.gfmTask]:{match:$e(N),order:1,parse:e=>({completed:"x"===e[1].toLowerCase()}),render:(e,t,n)=>r("input",{checked:e.completed,key:n.key,readOnly:!0,type:"checkbox"})},[s.heading]:{match:De(t.enforceAtxHeadings?M:I),order:1,parse:(e,r,n)=>({children:He(r,e[2],n),id:t.slugify(e[2],Me),level:e[1].length}),render:(e,t,n)=>r(`h${e.level}`,{id:e.id,key:n.key},t(e.children,n))},[s.headingSetext]:{match:De(P),order:0,parse:(e,t,r)=>({children:He(t,e[1],r),level:"="===e[2]?1:2,type:s.heading})},[s.htmlBlock]:{match:Ue(q),order:1,parse(e,t,r){const[,n]=e[3].match(fe),o=new RegExp(`^${n}`,"gm"),i=e[3].replace(o,""),c=(l=i,Ie.some((e=>e.test(l)))?Ve:He);var l;const u=e[1].toLowerCase(),s=-1!==h.indexOf(u),f=(s?u:e[1]).trim(),d={attrs:a(f,e[2]),noInnerParse:s,tag:f};return r.inAnchor=r.inAnchor||"a"===u,s?d.text=e[3]:d.children=c(t,i,r),r.inAnchor=!1,d},render:(e,t,n)=>r(e.tag,l({key:n.key},e.attrs),e.text||t(e.children,n))},[s.htmlSelfClosing]:{match:Ue(z),order:1,parse(e){const t=e[1].trim();return{attrs:a(t,e[2]||""),tag:t}},render:(e,t,n)=>r(e.tag,l({},e.attrs,{key:n.key}))},[s.htmlComment]:{match:Ue(F),order:1,parse:()=>({}),render:Ye},[s.image]:{match:ze(Ce),order:1,parse:e=>({alt:e[1],target:Je(e[2]),title:e[3]}),render:(e,n,o)=>r("img",{key:o.key,alt:e.alt||void 0,title:e.title||void 0,src:t.sanitizer(e.target,"img","src")})},[s.link]:{match:$e(Te),order:3,parse:(e,t,r)=>({children:We(t,e[1],r),target:Je(e[2]),title:e[3]}),render:(e,n,o)=>r("a",{key:o.key,href:t.sanitizer(e.target,"a","href"),title:e.title},n(e.children,o))},[s.linkAngleBraceStyleDetector]:{match:$e(B),order:0,parse:e=>({children:[{text:e[1],type:s.text}],target:e[1],type:s.link})},[s.linkBareUrlDetector]:{match:(e,t)=>t.inAnchor?null:$e(U)(e,t),order:0,parse:e=>({children:[{text:e[1],type:s.text}],target:e[1],title:void 0,type:s.link})},[s.linkMailtoDetector]:{match:$e(G),order:0,parse(e){let t=e[1],r=e[1];return v.test(r)||(r="mailto:"+r),{children:[{text:t.replace("mailto:",""),type:s.text}],target:r,type:s.link}}},[s.orderedList]:Re(r,1),[s.unorderedList]:Re(r,2),[s.newlineCoalescer]:{match:De(A),order:3,parse:Xe,render:()=>"\n"},[s.paragraph]:{match:Ge,order:3,parse:Ze,render:(e,t,n)=>r("p",{key:n.key},t(e.children,n))},[s.ref]:{match:$e(W),order:0,parse:e=>(c[e[1]]={target:e[2],title:e[4]},{}),render:Ye},[s.refImage]:{match:ze(V),order:0,parse:e=>({alt:e[1]||void 0,ref:e[2]}),render:(e,n,o)=>c[e.ref]?r("img",{key:o.key,alt:e.alt,src:t.sanitizer(c[e.ref].target,"img","src"),title:c[e.ref].title}):null},[s.refLink]:{match:$e(Z),order:0,parse:(e,t,r)=>({children:t(e[1],r),fallbackChildren:t(e[0].replace(X,"\\$1"),r),ref:e[2]}),render:(e,n,o)=>c[e.ref]?r("a",{key:o.key,href:t.sanitizer(c[e.ref].target,"a","href"),title:c[e.ref].title},n(e.children,o)):r("span",{key:o.key},n(e.fallbackChildren,o))},[s.table]:{match:De(H),order:1,parse:_e,render(e,t,n){const o=e;return r("table",{key:n.key},r("thead",null,r("tr",null,o.header.map((function(e,a){return r("th",{key:a,style:Fe(o,a)},t(e,n))})))),r("tbody",null,o.cells.map((function(e,a){return r("tr",{key:a},e.map((function(e,a){return r("td",{key:a,style:Fe(o,a)},t(e,n))})))}))))}},[s.text]:{match:Ue(ue),order:4,parse:e=>({text:e[0].replace(_,((e,r)=>t.namedCodesToUnicode[r]?t.namedCodesToUnicode[r]:e))}),render:e=>e.text},[s.textBolded]:{match:ze(oe),order:2,parse:(e,t,r)=>({children:t(e[2],r)}),render:(e,t,n)=>r("strong",{key:n.key},t(e.children,n))},[s.textEmphasized]:{match:ze(ae),order:3,parse:(e,t,r)=>({children:t(e[2],r)}),render:(e,t,n)=>r("em",{key:n.key},t(e.children,n))},[s.textEscaped]:{match:ze(le),order:1,parse:e=>({text:e[1],type:s.text})},[s.textMarked]:{match:ze(ie),order:3,parse:Ze,render:(e,t,n)=>r("mark",{key:n.key},t(e.children,n))},[s.textStrikethroughed]:{match:ze(ce),order:3,parse:Ze,render:(e,t,n)=>r("del",{key:n.key},t(e.children,n))}};!0===t.disableParsingRawHTML&&(delete u[s.htmlBlock],delete u[s.htmlSelfClosing]);const f=function(e){let t=Object.keys(e);function r(n,o){let a=[],i="";for(;n;){let c=0;for(;c<t.length;){const l=t[c],u=e[l],s=u.match(n,o,i);if(s){const e=s[0];n=n.substring(e.length);const t=u.parse(s,r,o);null==t.type&&(t.type=l),a.push(t),i=e;break}c++}}return a}return t.sort((function(t,r){let n=e[t].order,o=e[r].order;return n!==o?n-o:t<r?-1:1})),function(e,t){return r(function(e){return e.replace(j,"\n").replace(T,"").replace(Q,"    ")}(e),t)}}(u),d=(g=function(e,t){return function(r,n,o){const a=e[r.type].render;return t?t((()=>a(r,n,o)),r,n,o):a(r,n,o)}}(u,t.renderRule),function e(t,r={}){if(Array.isArray(t)){const n=r.key,o=[];let a=!1;for(let n=0;n<t.length;n++){r.key=n;const i=e(t[n],r),c="string"==typeof i;c&&a?o[o.length-1]+=i:null!==i&&o.push(i),a=c}return r.key=n,o}return g(t,e,r)});var g;const K=n(e);return i.length?r("div",null,K,r("footer",{key:"footer"},i.map((function(e){return r("div",{id:t.slugify(e.identifier,Me),key:e.identifier},e.identifier,d(f(e.footnote,{inline:!0})))})))):K}const tt=e=>{let{children:t="",options:r}=e,n=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)t.indexOf(r=a[n])>=0||(o[r]=e[r]);return o}(e,u);return o.cloneElement(et(t,r),n)};function rt(e){return rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rt(e)}function nt(){nt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:A(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==r&&n.call(k,i)&&(w=k);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==rt(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=j(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?h:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=h,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(rt(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),u(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return at(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?at(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function at(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function it(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function ct(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){it(a,n,o,i,c,"next",e)}function c(e){it(a,n,o,i,c,"throw",e)}i(void 0)}))}}var lt=wp.element,ut=lt.useMemo,st=lt.useEffect,ft=lt.useState;function dt(e,t){return pt.apply(this,arguments)}function pt(){return pt=ct(nt().mark((function e(t,r){var n,o,a,i,c,l,u,s,f,d,p,m,h,y,v=arguments;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=v.length>2&&void 0!==v[2]?v[2]:null,r){e.next=14;break}return e.prev=2,e.next=5,t.json();case 5:return o=e.sent,n&&console.log("[".concat(n,"] IN: "),o),e.abrupt("return",o);case 10:return e.prev=10,e.t0=e.catch(2),console.error("Could not parse the regular response.",{err:e.t0,data}),e.abrupt("return",{success:!1,message:"Could not parse the regular response."});case 14:a=t.body.getReader(),i=new TextDecoder("utf-8"),c="",l="";case 18:return e.next=21,a.read();case 21:if(u=e.sent,s=u.value,f=u.done,c+=i.decode(s,{stream:!0}),!f){e.next=27;break}return e.abrupt("break",68);case 27:d=c.split("\n"),p=0;case 29:if(!(p<d.length-1)){e.next=65;break}if(0===d[p].indexOf("data: ")){e.next=32;break}return e.abrupt("continue",62);case 32:if("live"!==(m=JSON.parse(d[p].replace("data: ",""))).type){e.next=39;break}n&&console.log("[".concat(n," STREAM] LIVE: "),m),l+=m.data,r&&r(l,m.data),e.next=62;break;case 39:if("error"!==m.type){e.next=51;break}return e.prev=40,n&&console.error("[".concat(n," STREAM] ERROR: "),m.data),e.abrupt("return",{success:!1,message:m.data});case 45:return e.prev=45,e.t1=e.catch(40),console.error("Could not parse the 'error' stream.",{err:e.t1,data:m}),e.abrupt("return",{success:!1,message:"Could not parse the 'error' stream."});case 49:e.next=62;break;case 51:if("end"!==m.type){e.next=62;break}return e.prev=52,h=JSON.parse(m.data),n&&console.log("[".concat(n," STREAM] END: "),h),e.abrupt("return",h);case 58:return e.prev=58,e.t2=e.catch(52),console.error("Could not parse the 'end' stream.",{err:e.t2,data:m}),e.abrupt("return",{success:!1,message:"Could not parse the 'end' stream."});case 62:p++,e.next=29;break;case 65:c=d[d.length-1],e.next=18;break;case 68:return e.prev=68,y=JSON.parse(c),n&&console.log("[".concat(n," STREAM] IN: "),y),e.abrupt("return",y);case 74:return e.prev=74,e.t3=e.catch(68),console.error("Could not parse the buffer.",{err:e.t3,buffer:c}),e.abrupt("return",{success:!1,message:"Could not parse the buffer."});case 78:case"end":return e.stop()}}),e,null,[[2,10],[40,45],[52,58],[68,74]])}))),pt.apply(this,arguments)}function mt(e,t,r,n){return ht.apply(this,arguments)}function ht(){return(ht=ct(nt().mark((function e(t,r,n,o){var a;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={"Content-Type":"application/json"},n&&(a["X-WP-Nonce"]=n),o&&(a.Accept="text/event-stream"),e.next=5,fetch("".concat(t),{method:"POST",headers:a,body:c(r)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function yt(e,t,r,n){return vt.apply(this,arguments)}function vt(){return vt=ct(nt().mark((function e(t,r,n,o){var a,i=arguments;return nt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>4&&void 0!==i[4]?i[4]:{},e.abrupt("return",new Promise((function(e,i){var c=new FormData;c.append("file",r);for(var l=0,u=Object.entries(a);l<u.length;l++){var s=ot(u[l],2),f=s[0],d=s[1];c.append(f,d)}var p=new XMLHttpRequest;p.open("POST",t,!0),n&&p.setRequestHeader("X-WP-Nonce",n),p.upload.onprogress=function(e){if(e.lengthComputable&&o){var t=e.loaded/e.total*100;o(t)}},p.onload=function(){if(p.status>=200&&p.status<300)try{var t=JSON.parse(p.responseText);e(t)}catch(e){i({status:p.status,statusText:p.statusText,error:"The server response is not valid JSON"})}else{try{var r=JSON.parse(p.responseText);return void i({status:p.status,message:r.message})}catch(e){}i({status:p.status,statusText:p.statusText})}},p.onerror=function(){i({status:p.status,statusText:p.statusText})},p.send(c)})));case 2:case"end":return e.stop()}}),e)}))),vt.apply(this,arguments)}var gt=function(){var e=ot(ft(!0),2),t=e[0],r=e[1];st((function(){var e=setTimeout((function(){var e=setInterval((function(){r((function(e){return!e}))}),500);return function(){return clearInterval(e)}}),200);return function(){return clearTimeout(e)}}),[]);var n={opacity:t?1:0,width:"1px",height:"1em",borderLeft:"8px solid",marginLeft:"2px"};return React.createElement("span",{style:n})},bt=function(e){var t,r=e.content,n=e.error,o=e.isStreaming,a=e.baseClass,i=void 0===a?"mwai-output-handler":a,c=null!==(t=n||r)&&void 0!==t?t:"";(c.match(/```/g)||[]).length%2!=0?c+="\n```":o&&(c+="<BlinkingCursor />");var l=ut((function(){var e=[i];return n&&e.push("mwai-error"),e}),[n]),u=ut((function(){return{wrapper:"div",forceWrapper:!0,overrides:{BlinkingCursor:{component:gt},a:{props:{target:"_blank"}}}}}),[]);return React.createElement(tt,{options:u,className:l.join(" "),children:c})};function wt(e){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},wt(e)}function xt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,kt(n.key),n)}}function kt(e){var t=function(e,t){if("object"!=wt(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==wt(t)?t:String(t)}var St=function(){function e(){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),"undefined"!=typeof window&&window.MwaiAPI)return window.MwaiAPI;this.chatbots=[],this.forms=[],this.filters={},this.actions={},"undefined"!=typeof window&&(window.MwaiAPI=this)}var t,r;return t=e,r=[{key:"getChatbot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.chatbots.find((function(t){return t.botId===e||t.customId===e})):this.chatbots[0]}},{key:"getForm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e?this.forms.find((function(t){return t.formId===e})):this.forms[0]}},{key:"addFilter",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.filters[e]||(this.filters[e]=[]),this.filters[e].push({callback:t,priority:r}),this.filters[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"applyFilters",value:function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return this.filters[e]?this.filters[e].reduce((function(e,t){return t.callback.apply(t,[e].concat(n))}),t):t}},{key:"addAction",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;this.actions[e]||(this.actions[e]=[]),this.actions[e].push({callback:t,priority:r}),this.actions[e].sort((function(e,t){return e.priority-t.priority}))}},{key:"doAction",value:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.actions[e]&&this.actions[e].forEach((function(e){e.callback.apply(e,r)}))}}],r&&xt(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Et=function(){if("undefined"!=typeof window&&window.MwaiAPI)return window.MwaiAPI;var e=new St;return"undefined"!=typeof window&&(window.MwaiAPI=e),e}();function Ot(e){return Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ot(e)}function At(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Pt(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}function jt(){jt=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",l=a.toStringTag||"@@toStringTag";function u(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,r){return e[t]=r}}function s(e,t,r,n){var a=t&&t.prototype instanceof v?t:v,i=Object.create(a.prototype),c=new T(n||[]);return o(i,"_invoke",{value:A(e,r,c)}),i}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=s;var d="suspendedStart",p="suspendedYield",m="executing",h="completed",y={};function v(){}function g(){}function b(){}var w={};u(w,i,(function(){return this}));var x=Object.getPrototypeOf,k=x&&x(x(C([])));k&&k!==r&&n.call(k,i)&&(w=k);var S=b.prototype=v.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function r(o,a,i,c){var l=f(e[o],e,a);if("throw"!==l.type){var u=l.arg,s=u.value;return s&&"object"==Ot(s)&&n.call(s,"__await")?t.resolve(s.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(s).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,c)}))}c(l.arg)}var a;o(this,"_invoke",{value:function(e,n){function o(){return new t((function(t,o){r(e,n,t,o)}))}return a=a?a.then(o,o):o()}})}function A(t,r,n){var o=d;return function(a,i){if(o===m)throw new Error("Generator is already running");if(o===h){if("throw"===a)throw i;return{value:e,done:!0}}for(n.method=a,n.arg=i;;){var c=n.delegate;if(c){var l=j(c,n);if(l){if(l===y)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===d)throw o=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=m;var u=f(t,r,n);if("normal"===u.type){if(o=n.done?h:p,u.arg===y)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o=h,n.method="throw",n.arg=u.arg)}}}function j(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,j(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),y;var a=f(o,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,y;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,y):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,y)}function L(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(L,this),this.reset(!0)}function C(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(Ot(t)+" is not iterable")}return g.prototype=b,o(S,"constructor",{value:b,configurable:!0}),o(b,"constructor",{value:g,configurable:!0}),g.displayName=u(b,l,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===g||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,u(e,l,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},E(O.prototype),u(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new O(s(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},E(S),u(S,l,"Generator"),u(S,i,(function(){return this})),u(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=C,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(R),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,y):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),y},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),R(r),y}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var o=n.arg;R(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:C(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),y}},t}function Lt(e,t,r,n,o,a,i){try{var c=e[a](i),l=c.value}catch(e){return void r(e)}c.done?t(l):Promise.resolve(l).then(n,o)}function Rt(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){Lt(a,n,o,i,c,"next",e)}function c(e){Lt(a,n,o,i,c,"throw",e)}i(void 0)}))}}function Tt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ct(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tt(Object(r),!0).forEach((function(t){Nt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Nt(e,t,r){return t=function(e){var t=function(e,t){if("object"!=Ot(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=Ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==Ot(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||Pt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Pt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){if(e){if("string"==typeof e)return qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var _t=wp.element,Ft=_t.render,$t=_t.useEffect,zt=_t.useRef,Dt=_t.useState,Ut=_t.useMemo,Gt=function(e,t,r){try{var n={timestamp:Date.now(),fields:t};localStorage.setItem(e,JSON.stringify(n)),r&&console.log("[".concat(e,"] => Stored form data"),n)}catch(e){console.warn("Could not store form data in localStorage",e)}},Bt=function(e){localStorage.removeItem(e)},Jt={background:"#711f1f",color:"#fff",padding:"15px 30px",borderRadius:"10px",margin:"10px 0 0 0"},Ht=function(e,t){var r=e.subType,n=e.element;if("checkbox"===r){var o=Array.isArray(t)?t:t?[t]:[];return Mt(n.querySelectorAll('input[type="checkbox"]')).forEach((function(e){e.checked=o.includes(e.value)})),o}if("radio"===r)return Mt(n.querySelectorAll('input[type="radio"]')).forEach((function(e){e.checked=e.value===t})),t||null;if("select"===r){var a=n.querySelector("select");return a&&(a.value=String(t||"")),t||""}if("file"===r)return[];if("input"===r||"textarea"===r){var i="textarea"===r?"textarea":"input",c=n.querySelector(i);return c&&(c.value=String(t||"")),t||""}return t};const Wt=function(e){var t=e.system,r=e.params,n=t.id,o=t.stream,a=void 0!==o&&o,i=t.sessionId,c=t.contextId,l=t.restNonce,u=t.restUrl,s=t.debugMode,f=r.id,d=r.localMemory,p=void 0!==d&&d,m=r.label,h=r.outputElement,y=r.inputs,v=It(Dt(!1),2),g=v[0],b=v[1],w=It(Dt(!1),2),x=w[0],k=w[1],S=It(Dt({}),2),E=S[0],O=S[1],A=It(Dt(),2),j=A[0],L=A[1],R=It(Dt([]),2),T=R[0],C=R[1],N=zt(null);$t((function(){if(f){var e={formId:f,getFields:function(){return E},submit:function(){return _()}},t=Et.forms.findIndex((function(e){return e.formId===f}));-1!==t?Et.forms[t]=e:Et.forms.push(e)}}),[f,E,_]);var I=function(e,t){return!e.required||!!t&&(!Array.isArray(t)||t.length>0)},M=function(e){var t,r,n,o=null!==(t=e.field)&&void 0!==t?t:e.selector,a=null!==(r=null===(n=E[o])||void 0===n?void 0:n.value)&&void 0!==r?r:null,i=function(e){var t=e.subType,r=e.element,n=null;if("checkbox"===t)n=Mt(r.querySelectorAll('input[type="checkbox"]')).filter((function(e){return e.checked})).map((function(e){return e.value}));else if("radio"===t){var o=Mt(r.querySelectorAll('input[type="radio"]')).find((function(e){return e.checked}));n=o?o.value:null}else if("select"===t){var a=r.querySelector("select");n=a?a.value:""}else if("file"===t){var i=r.querySelector('input[type="file"]');n=i?i.hasAttribute("multiple")?Array.from(i.files||[]):i.files.length>0?[i.files[0]]:[]:[]}else if("input"===t||"textarea"===t){var c="textarea"===t?"textarea":"input",l=r.querySelector(c);n=l?l.value:""}else n=r.textContent.trim()||r.value||"";return n}(e);JSON.stringify(a)!==JSON.stringify(i)&&O((function(t){return Ct(Ct({},t),{},Nt({},o,Ct(Ct({},t[o]),{},{value:i,isValid:I(e,i)})))}))},P=function(){var e=N.current.closest(".mwai-form-container");if(e){var t=e.getAttribute("id")||"fallback-id",r="mwai-form-data-".concat(t);if(y&&(y.selectors.length||y.fields.length)){var n=null;p&&(n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,r=arguments.length>2?arguments[2]:void 0;try{var n=localStorage.getItem(e);if(!n)return r&&console.log("[".concat(e,"] => No form data found in localStorage")),null;var o=JSON.parse(n);return Date.now()-o.timestamp>60*t*60*1e3?(localStorage.removeItem(e),r&&console.log("[".concat(e,"] => Form data in localStorage is expired")),null):(r&&console.log("[".concat(e,"] => Loaded form data"),o),o.fields)}catch(t){return console.warn("[".concat(e,"] => Could not load form data from localStorage"),t),null}}(r,12,s));var o=[];y.selectors.forEach((function(e){var t=document.querySelector(e);if(t){var r="true"===t.getAttribute("data-form-required"),n=t.getAttribute("data-form-type");if(!n){var a=(t.tagName||"").toLowerCase();n="input"===a?"input":"textarea"===a?"textarea":"select"===a?"select":"element"}o.push({selector:e,subType:n,element:t,required:r})}else C((function(t){return[].concat(Mt(t),["Input (selector) not found: ".concat(e)])}))})),y.fields.forEach((function(t){var r=e.querySelector("fieldset[data-form-name='".concat(t,"']"));if(r){var n=r.getAttribute("data-form-type")||"input",a="true"===r.getAttribute("data-form-required");r.querySelector('input[type="file"]')&&(n="file"),o.push({field:t,subType:n,element:r,required:a})}else C((function(e){return[].concat(Mt(e),["Field not found: ".concat(t)])}))}));var a={};o.forEach((function(e){var t,r,o,i=null!==(t=e.field)&&void 0!==t?t:e.selector,c=null===(r=n)||void 0===r||null===(r=r[i])||void 0===r?void 0:r.value;if(void 0!==c)o=Ht(e,c);else{var l=e.element.getAttribute("data-default-value")||"";o=Ht(e,l)}if(("radio"===e.subType||"select"===e.subType)&&!o)if("radio"===e.subType){var u=Mt(e.element.querySelectorAll('input[type="radio"]'));u.length>0&&(o=Ht(e,u[0].value))}else if("select"===e.subType){var s=e.element.querySelector("select");s&&s.options.length>0&&(o=Ht(e,s.options[0].value))}var f=e.subType,d=e.element;"element"===f&&(o=d.textContent.trim()||d.value||""),a[i]={value:o,subType:e.subType,isRequired:e.required,isValid:I(e,o)}})),O(a),p&&Gt(r,a,s),o.forEach((function(e){e.element.addEventListener("change",(function(){return M(e)})),e.element.addEventListener("keyup",(function(){return M(e)})),e.selector&&new MutationObserver((function(){return M(e)})).observe(e.element,{childList:!0,subtree:!0})}))}else k(!0)}else C((function(e){return[].concat(Mt(e),["Cannot find parent .mwai-form-container"])}))};$t((function(){return"complete"===document.readyState?P():window.addEventListener("load",P),function(){window.removeEventListener("load",P)}}),[y]),$t((function(){if(0!==Object.keys(E).length){var e=Object.values(E).every((function(e){return e.isValid}));k(e);var t=N.current.closest(".mwai-form-container");if(t){var r=t.getAttribute("id")||"fallback-id",n="mwai-form-data-".concat(r);p&&Gt(n,E,s)}}}),[E]),$t((function(){if(j){var e=document.querySelector(h);if(e){var t=j.success,r=j.reply,o=j.message,l=function(e,t){for(var r=arguments.length,n=new Array(r>2?r-2:0),o=2;o<r;o++)n[o-2]=arguments[o];return Et.applyFilters.apply(Et,[e,t].concat(n))}("ai.formReply",r,{formId:n,sessionId:i,contextId:c});"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?Ft(t?React.createElement(bt,{baseClass:"mwai-form-output",content:l,isStreaming:g&&a}):React.createElement(bt,{baseClass:"mwai-form-output",error:o,isStreaming:g&&a}),e):e.value=l||""}else T.includes("Output not found: ".concat(h||"N/A"))||C((function(e){return[].concat(Mt(e),["Output not found: ".concat(h||"N/A")])}))}}),[g,a,j,h,n,i,c]),$t((function(){var e,t=null===(e=N.current)||void 0===e?void 0:e.closest(".mwai-form-container");if(t){var r=function(){P()};return t.addEventListener("mwaiFormReset",r),function(){t.removeEventListener("mwaiFormReset",r)}}}),[]);var q=function(){var e=Rt(jt().mark((function e(t){var r,n;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",null);case 2:return r="".concat(u,"/mwai-ui/v1/files/upload"),e.next=5,yt(r,t,l,(function(e){s&&console.log('Uploading "'.concat(t.name,'" => ').concat(e,"%"))}),{type:"N/A",purpose:"N/A"});case 5:if((n=e.sent)&&n.success){e.next=8;break}throw new Error((null==n?void 0:n.message)||"File upload failed.");case 8:return e.abrupt("return",n.data);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Rt(jt().mark((function e(){var t,r,o,f,d,m,h,y,v,g,w,x,k,S,O,A,j,R,T;return jt().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b(!0),L({success:!0,reply:""}),C([]),e.prev=3,t=Ct({},E),r={},o={},f=Object.keys(t).filter((function(e){return"file"===t[e].subType})),d=At(f),e.prev=9,d.s();case 11:if((m=d.n()).done){e.next=41;break}h=m.value,y=t[h].value||[],v=[],g=At(y),e.prev=16,g.s();case 18:if((w=g.n()).done){e.next=30;break}if(!((x=w.value)instanceof File)){e.next=27;break}return e.next=23,q(x);case 23:k=e.sent,v.push(k),e.next=28;break;case 27:v.push(x);case 28:e.next=18;break;case 30:e.next=35;break;case 32:e.prev=32,e.t0=e.catch(16),g.e(e.t0);case 35:return e.prev=35,g.f(),e.finish(35);case 38:o[h]=v;case 39:e.next=11;break;case 41:e.next=46;break;case 43:e.prev=43,e.t1=e.catch(9),d.e(e.t1);case 46:return e.prev=46,d.f(),e.finish(46);case 49:return Object.keys(t).forEach((function(e){f.includes(e)||(r[e]=t[e].value)})),S={id:n,session:i,contextId:c,stream:a,fields:r,uploadFields:o},s&&console.log("[FORMS] OUT:",S),e.next=54,mt("".concat(u,"/mwai-ui/v1/forms/submit"),S,l,a);case 54:return O=e.sent,e.next=57,dt(O,a?function(e){return L({success:!0,reply:e})}:null,s?"FORMS":null);case 57:A=e.sent,L(A),s&&console.log("[FORMS] IN:",A),A.success&&p&&(j=N.current.closest(".mwai-form-container"))&&(R=j.getAttribute("id")||"fallback-id",T="mwai-form-data-".concat(R),Bt(T)),e.next=67;break;case 63:e.prev=63,e.t2=e.catch(3),console.error("An error occurred during form submission:",e.t2),C((function(t){return[].concat(Mt(t),[e.t2.message])}));case 67:return e.prev=67,b(!1),e.finish(67);case 70:case"end":return e.stop()}}),e,null,[[3,63,67,70],[9,43,46,49],[16,32,35,38]])})));return function(){return e.apply(this,arguments)}}(),F=Ut((function(){var e=["mwai-form-submit"];return g&&e.push("mwai-loading"),e}),[g]);return React.createElement("div",{id:f,ref:N,className:F.join(" ")},React.createElement("button",{disabled:!x||g,onClick:_},React.createElement("span",null,m)),T.length>0&&React.createElement("ul",{className:"mwai-forms-errors",style:Jt},T.map((function(e,t){return React.createElement("li",{key:t},e)}))))};function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Zt=wp.element,Xt=(Zt.useState,Zt.useMemo);Zt.useEffect,Zt.useRef,Zt.useCallback;var Yt=["enabled","content","children","className"];function Qt(){return Qt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qt.apply(this,arguments)}function Kt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return er(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?er(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var tr=wp.element,rr=tr.useState,nr=tr.useEffect,or=tr.useRef,ar=tr.useCallback;const ir=function(e){var t=e.enabled,r=e.content,n=e.children,o=e.className,a=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,Yt),i=Xt((function(){return function(e,t){return Array.isArray(e)||(e=[e]),t&&Object.entries(t).forEach((function(t){var r=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Vt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vt(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,2),n=r[0];r[1]&&e.push(n)})),e.join(" ")}}),[]),c=Kt(rr("idle"),2),l=c[0],u=c[1],s=Kt(rr(!0),2),f=s[0],d=s[1],p=or(null),m=or(!1),h=ar((function(){m.current||(m.current=!0,p.current=setTimeout((function(){d(!1)}),500))}),[]),y=ar((function(){p.current&&clearTimeout(p.current),d(!0),m.current=!1}),[]);nr((function(){return function(){p.current&&clearTimeout(p.current)}}),[]);var v="success"===l?'<path d="M10.7673 18C10.3106 18 9.86749 17.8046 9.54432 17.4555L5.50694 13.1222C4.83102 12.3968 4.83102 11.2208 5.50694 10.4954C6.18287 9.76997 7.27871 9.76997 7.95505 10.4954L10.6794 13.4196L16.9621 5.63976C17.5874 4.86495 18.6832 4.78289 19.4031 5.45388C20.125 6.12487 20.2036 7.29638 19.5759 8.07391L12.0778 17.3589C11.7639 17.7475 11.3119 17.9801 10.8319 18C10.8087 18 10.788 18 10.7673 18Z" />':"error"===l?'<path d="M17.7623 17.7626C17.0831 18.4418 15.9549 18.416 15.244 17.705L5.79906 8.26012C5.08811 7.54917 5.0623 6.42098 5.74145 5.74183C6.4206 5.06267 7.54879 5.08849 8.25975 5.79944L17.7047 15.2443C18.4156 15.9553 18.4414 17.0835 17.7623 17.7626Z" /><path d="M17.5508 8.52848L8.52842 17.5509C7.84927 18.23 6.72108 18.2042 6.01012 17.4933C5.29917 16.7823 5.27336 15.6541 5.95251 14.975L14.9749 5.95257C15.6541 5.27342 16.7823 5.29923 17.4932 6.01019C18.2042 6.72114 18.23 7.84933 17.5508 8.52848Z" />':'<path d="M7 5a3 3 0 0 1 3-3h9a3 3 0 0 1 3 3v9a3 3 0 0 1-3 3h-2v2a3 3 0 0 1-3 3H5a3 3 0 0 1-3-3v-9a3 3 0 0 1 3-3h2zm2 2h5a3 3 0 0 1 3 3v5h2a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1h-9a1 1 0 0 0-1 1zM5 9a1 1 0 0 0-1 1v9a1 1 0 0 0 1 1h9a1 1 0 0 0 1-1v-9a1 1 0 0 0-1-1z" />';return React.createElement("div",Qt({},a,{onMouseLeave:y,onMouseEnter:h,onMouseOver:h}),React.createElement("span",{className:o},n),React.createElement("div",{className:i("mwai-reply-actions",{"mwai-hidden":f})},t&&React.createElement("div",{className:"mwai-copy-button",onClick:function(){try{navigator.clipboard.writeText(r),u("success")}catch(e){u("error"),console.warn("Not allowed to copy to clipboard. Make sure your website uses HTTPS.",{content:r})}finally{setTimeout((function(){u("idle")}),2e3)}}},React.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",dangerouslySetInnerHTML:{__html:v}}))))};function cr(e,t){if(e){if("string"==typeof e)return lr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lr(e,t):void 0}}function lr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var ur=wp.element,sr=ur.useEffect,fr=ur.useRef,dr=ur.useState;const pr=function(e){e.system;var t=e.params,r=(e.theme,t.id),n=t.copyButton,o=t.className,a="".concat("mwai-form-field-output").concat(o?" "+o:""),i=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||cr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(dr((function(){var e;return null!=u&&null!==(e=u.current)&&void 0!==e&&e.textContent?u.current.textContent:""})),2),c=i[0],l=i[1],u=fr(null);return sr((function(){var e=new MutationObserver((function(e){var t,r=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=cr(e))){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,c=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){c=!0,a=e},f:function(){try{i||null==r.return||r.return()}finally{if(c)throw a}}}}(e);try{for(r.s();!(t=r.n()).done;)"childList"===t.value.type&&l(u.current.innerText)}catch(e){r.e(e)}finally{r.f()}}));return u.current&&e.observe(u.current,{childList:!0,subtree:!0}),function(){return e.disconnect()}}),[]),React.createElement("div",{style:{position:"relative"}},React.createElement(ir,{content:c,enabled:n},React.createElement("div",{id:r,ref:u,className:a})))};function mr(e){return function(e){if(Array.isArray(e))return yr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||hr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(e,t){if(e){if("string"==typeof e)return yr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yr(e,t):void 0}}function yr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var vr=wp.element,gr=(vr.useEffect,vr.useRef),br=vr.useState,wr=vr.useMemo,xr={background:"#711f1f",color:"#fff",padding:"15px 30px",borderRadius:"10px",margin:"10px 0 0 0"};const kr=function(e){var t=e.system,r=e.params,n=t.debugMode,o=r.id,a=r.localMemory,i=void 0!==a&&a,c=r.label,l=void 0===c?"Reset":c,u=function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,c=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(c.push(n.value),c.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return c}}(e,t)||hr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(br([]),2),s=u[0],f=u[1],d=gr(null),p=wr((function(){return["mwai-form-reset"]}),[]);return React.createElement("div",{id:o,ref:d,className:p.join(" ")},React.createElement("button",{onClick:function(){try{var e=d.current.closest(".mwai-form-container");if(!e)return void f((function(e){return[].concat(mr(e),["Could not find parent .mwai-form-container"])}));var t=e.getAttribute("id")||"fallback-id",r="mwai-form-data-".concat(t);i&&(function(e){localStorage.removeItem(e)}(r),n&&console.log("[".concat(r,"] => Cleared local storage on reset"))),e.querySelectorAll("fieldset[data-form-name]").forEach((function(e){var t=e.getAttribute("data-form-type");if("checkbox"===t){var r=(e.getAttribute("data-default-value")||"").split(",");mr(e.querySelectorAll('input[type="checkbox"]')).forEach((function(e){e.checked=r.includes(e.value)}))}else if("radio"===t){var n=e.getAttribute("data-default-value")||"";mr(e.querySelectorAll('input[type="radio"]')).forEach((function(e){e.checked=e.value===n}))}else if("select"===t){var o=e.getAttribute("data-default-value")||"",a=e.querySelector("select");a&&(a.value=o)}else if("file"===t);else if("input"===t||"textarea"===t){var i=e.getAttribute("data-default-value")||"",c="textarea"===t?"textarea":"input",l=e.querySelector(c);l&&(l.value=i)}})),e.querySelectorAll(".mwai-form-output").forEach((function(e){e.innerHTML="",e.remove()})),i&&function(e,t){var r={timestamp:Date.now(),fields:{}};localStorage.setItem(e,JSON.stringify(r)),t&&console.log("[".concat(e,"] => Stored EMPTY form data on reset"),r)}(r,n);var o=new CustomEvent("mwaiFormReset");e.dispatchEvent(o),n&&console.log("[".concat(r,"] => Fields restored to data-default-value, local storage cleared/overwritten. Dispatched mwaiFormReset event. Also cleared .mwai-form-output content."))}catch(e){console.error("Error resetting form fields:",e),f((function(t){return[].concat(mr(t),[e.message])}))}}},React.createElement("span",null,l)),s.length>0&&React.createElement("ul",{className:"mwai-forms-errors",style:xr},s.map((function(e,t){return React.createElement("li",{key:t},e)}))))};var Sr=wp.element.render;function Er(e){if(!e)return"{}";var t=document.createElement("textarea");return t.innerHTML=e,t.value}document.addEventListener("DOMContentLoaded",(function(){function e(e,t){e.forEach((function(e){var r=JSON.parse(Er(e.getAttribute("data-params"))),n=JSON.parse(Er(e.getAttribute("data-system"))),o=JSON.parse(Er(e.getAttribute("data-theme")));e.removeAttribute("data-params"),e.removeAttribute("data-system"),e.removeAttribute("data-theme"),Sr(wp.element.createElement(t,{system:n,params:r,theme:o}),e)}))}e(document.querySelectorAll(".mwai-form-upload-container"),n),e(document.querySelectorAll(".mwai-form-field-container"),r),e(document.querySelectorAll(".mwai-form-submit-container"),Wt),e(document.querySelectorAll(".mwai-form-reset-container"),kr),e(document.querySelectorAll(".mwai-form-output-container"),pr)}))})();